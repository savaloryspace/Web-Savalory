<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Savalory - F&B Ordering System</title>
<style>
/* ------------------ GLOBAL STYLE ------------------ */
:root {
  --primary: #ff9d00;
  --dark-bg: #161b22;
  --dark-card: #1f2630;
  --light-bg: #ffffff;
  --light-card: #f6f6f6;
}

body {
  margin: 0;
  font-family: "Poppins", sans-serif;
  background: var(--light-bg);
  transition: 0.3s;
}

.dark {
  background: var(--dark-bg);
  color: white;
}

/* NAVBAR */
nav {
  display: flex;
  justify-content: space-between;
  padding: 15px 20px;
  background: var(--primary);
  color: white;
  font-weight: bold;
  position: sticky;
  top: 0;
  z-index: 10;
}

nav .cart {
  cursor: pointer;
  position: relative;
}

.cart-badge {
  position: absolute;
  top: -6px;
  right: -6px;
  background: red;
  color: #fff;
  border-radius: 50%;
  padding: 2px 7px;
  font-size: 12px;
}

/* MENU CARD */
.menu-container {
  padding: 20px;
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
  gap: 15px;
}

.card {
  background: var(--light-card);
  border-radius: 15px;
  padding: 10px;
  transition: 0.3s;
}

.dark .card { background: var(--dark-card); }

.card img {
  width: 100%;
  border-radius: 12px;
}

.card button {
  width: 100%;
  padding: 8px;
  border: none;
  background: var(--primary);
  color: white;
  border-radius: 8px;
  cursor: pointer;
  margin-top: 8px;
}

.card button.disabled {
  background: gray;
  cursor: not-allowed;
}

/* FILTER BUTTON */
.category-btns {
  text-align: center;
  padding: 10px;
}

.category-btns button {
  border: none;
  padding: 8px 15px;
  margin: 4px;
  border-radius: 20px;
  background: var(--primary);
  color: white;
  cursor: pointer;
}

/* CART POPUP */
#cartPopup {
  display: none;
  position: fixed;
  right: 0;
  top: 0;
  height: 100vh;
  width: 360px;
  background: white;
  box-shadow: -4px 0 12px rgba(0, 0, 0, 0.2);
  padding: 20px;
  z-index: 50;
}

.dark #cartPopup {
  background: var(--dark-card);
  color: white;
}

.cart-item {
  display: flex;
  justify-content: space-between;
  margin-bottom: 10px;
  border-bottom: 1px solid #eee;
}

/* Checkout Form */
form {
  padding: 15px;
  background: var(--light-card);
  border-radius: 12px;
}

.dark form { background: var(--dark-card); }

form input {
  width: 100%;
  padding: 10px;
  border-radius: 8px;
  border: 1px solid #ccc;
  margin-bottom: 12px;
}

/* ADMIN PANEL */
#adminPanel {
  display: none;
  padding: 20px;
}

.admin-table {
  width: 100%;
  border-collapse: collapse;
}

.admin-table th, .admin-table td {
  border-bottom: 1px solid #ccc;
  padding: 8px;
  text-align: center;
}

.toggle-dark {
  position: fixed;
  bottom: 20px;
  left: 20px;
  padding: 10px;
  background: var(--primary);
  color: #fff;
  border-radius: 10px;
  cursor: pointer;
}
</style>
</head>
<body>

<!-- NAV -->
<nav>
  <span onclick="showAdminLogin()">ADMIN</span>
  SAVALORY ORDER
  <div class="cart" onclick="openCart()">
    ðŸ›’<span class="cart-badge" id="cartCount">0</span>
  </div>
</nav>

<!-- FILTER MENU -->
<div class="category-btns">
  <button onclick="filterMenu('all')">Semua</button>
  <button onclick="filterMenu('makanan')">Makanan</button>
  <button onclick="filterMenu('minuman')">Minuman</button>
</div>

<!-- MENU LIST -->
<div class="menu-container" id="menuList"></div>

<!-- CART POPUP -->
<div id="cartPopup">
  <h2>ðŸ›’ Keranjang</h2>
  <div id="cartItems"></div>
  <h3>Total: Rp <span id="totalPrice">0</span></h3>

  <form id="checkoutForm">
    <input type="text" placeholder="Nama Pemesan" required>
    <input type="text" placeholder="Nomor Meja" required>
    <input type="text" placeholder="No WhatsApp" required>
    <button type="button" onclick="checkoutOrder()">Checkout</button>
  </form>
</div>

<!-- ADMIN PANEL -->
<div id="adminPanel">
  <h2>PANEL ADMIN</h2>

  <table class="admin-table" id="adminTable"></table>
</div>

<button class="toggle-dark" onclick="toggleDarkMode()">ðŸŒ“</button>

<script>
/* Data menu */
let menu = [
  { id:1, name:"Nasi Goreng", category:"makanan", price:15000, soldOut:false },
  { id:2, name:"Mie Ayam", category:"makanan", price:18000, soldOut:false },
  { id:3, name:"Es Teh", category:"minuman", price:5000, soldOut:false },
  { id:4, name:"Cappuccino", category:"minuman", price:14000, soldOut:false }
];

let cart = [];

/* RENDER MENU */
function renderMenu(filter = "all") {
  const container = document.getElementById("menuList");
  container.innerHTML = "";

  menu.filter(m => filter === "all" || m.category === filter)
      .forEach(item => {
        container.innerHTML += `
        <div class='card'>
          <img src="https://via.placeholder.com/200x150" />
          <h3>${item.name}</h3>
          <p>Rp ${item.price.toLocaleString()}</p>
          <button class="${item.soldOut ? "disabled":""}"
            onclick="addToCart(${item.id})"
            ${item.soldOut ? "disabled":""}>
            ${item.soldOut ? "SOLD OUT" : "Tambah"}
          </button>
        </div>`;
      });
}
renderMenu();

/* ADD CART */
function addToCart(id) {
  let item = menu.find(x => x.id === id);
  cart.push(item);

  document.getElementById("cartCount").innerText = cart.length;
  renderCart();
}

/* OPEN CART */
function openCart() {
  document.getElementById("cartPopup").style.display = "block";
}

/* RENDER CART */
function renderCart() {
  let list = document.getElementById("cartItems");
  let total = cart.reduce((a,b)=>a+b.price,0);
  list.innerHTML = "";
  cart.forEach(c=>{
    list.innerHTML += `<div class="cart-item"><span>${c.name}</span> <span>Rp ${c.price}</span></div>`;
  })
  document.getElementById("totalPrice").innerText = total;
}

/* CHECKOUT PROGRESS */
function checkoutOrder() {
  alert("âœ… Pesanan berhasil! (Google Sheets integration next)");
}

/* FILTER MENU */
function filterMenu(cat) {
  renderMenu(cat);
}

/* DARK MODE */
function toggleDarkMode() {
  document.body.classList.toggle("dark");
}

/* ---------- ADMIN PANEL ---------- */
function showAdminLogin() {
  let pass = prompt("Masukkan password admin:");
  if (pass === "admin123") {
    document.getElementById("adminPanel").style.display = "block";
    renderAdminPanel();
  }
}

function renderAdminPanel() {
  let table = document.getElementById("adminTable");
  table.innerHTML = `
    <tr>
      <th>Menu</th><th>Harga</th><th>Diskon %</th><th>Sold Out</th>
    </tr>
  `;

  menu.forEach((m, i) => {
    table.innerHTML += `
      <tr>
        <td>${m.name}</td>
        <td><input type="number" value="${m.price}" onchange="updatePrice(${m.id}, this.value)"></td>
        <td><input type="number" value="0" onchange="updateDiscount(${m.id}, this.value)"></td>
        <td><input type="checkbox" ${m.soldOut?"checked":""} onclick="toggleSoldOut(${m.id})"></td>
      </tr>
    `;
  });
}

function updatePrice(id, newPrice) {
  menu.find(m=>m.id===id).price = Number(newPrice);
  renderMenu();
}

function updateDiscount(id, value) {
  let item = menu.find(m=>m.id===id);
  let discount = item.price * (value/100);
  item.price = item.price - discount;
  renderMenu();
}

function toggleSoldOut(id) {
  menu.find(m=>m.id===id).soldOut = !menu.find(m=>m.id===id).soldOut;
  renderMenu();
}
</script>
</body>
</html>
